
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation">
      
      
        <meta name="author" content="Percona LLC">
      
      
        <link rel="canonical" href="https://pmm-doc.netlify.app/2.x/using/backup.html">
      
      <link rel="icon" href="../_images/percona-favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>Backup and Restore - Percona Monitoring and Management</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.3/css/line.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../css/percona.css">
    
      <link rel="stylesheet" href="../css/lightgallery.min.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="percona-light" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#backup-and-restore" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Percona Monitoring and Management" class="md-header__button md-logo" aria-label="Percona Monitoring and Management" data-md-component="logo">
      
  <img src="../_images/percona-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Percona Monitoring and Management
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Backup and Restore
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/percona/pmm-doc/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    percona/pmm-doc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Percona Monitoring and Management" class="md-nav__button md-logo" aria-label="Percona Monitoring and Management" data-md-component="logo">
      
  <img src="../_images/percona-logo.svg" alt="logo">

    </a>
    Percona Monitoring and Management
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/percona/pmm-doc/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    percona/pmm-doc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../setting-up/index.html">Setting up</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Setting up" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Setting up
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="index.html">Using</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Using" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Using
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
          
            
          
            
          
            
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../how-to/index.html">How to</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="How to" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          How to
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../details/index.html">Details</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Details" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Details
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq.html" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../release-notes/index.html">Release Notes</a>
          
            <label for="__nav_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Release Notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-you-start" class="md-nav__link">
    Before you start
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-storage-location" class="md-nav__link">
    Add a storage location
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mysql-backup-preconditions" class="md-nav__link">
    MySQL backup preconditions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongodb-backup-preconditions" class="md-nav__link">
    MongoDB backup preconditions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#make-a-backup" class="md-nav__link">
    Make a backup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#make-a-scheduled-backup" class="md-nav__link">
    Make a scheduled backup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edit-a-scheduled-backup" class="md-nav__link">
    Edit a scheduled backup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongodb-point-in-time-recoverable-backups" class="md-nav__link">
    MongoDB Point-In-Time-Recoverable Backups
  </a>
  
    <nav class="md-nav" aria-label="MongoDB Point-In-Time-Recoverable Backups">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-it" class="md-nav__link">
    What is it?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-it-work" class="md-nav__link">
    How does it work?
  </a>
  
    <nav class="md-nav" aria-label="How does it work?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-pitr" class="md-nav__link">
    Enabling PITR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pitr-artifacts" class="md-nav__link">
    PITR Artifacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pitr-and-other-scheduled-backups" class="md-nav__link">
    PITR and Other Scheduled Backups
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restore-a-backup" class="md-nav__link">
    Restore a backup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-a-backup" class="md-nav__link">
    Delete a backup
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/percona/pmm-doc/edit/main/docs/using/backup.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="backup-and-restore">Backup and Restore<a class="headerlink" href="#backup-and-restore" title="Permanent link">&para;</a></h1>
<div class="admonition caution alert alert-warning">
<p class="admonition-title">Caution</p>
<ul>
<li>Backup and restore are <a href="../details/glossary.html#technical-preview">technical preview</a> features.</li>
<li>Currently supported: MySQL database server or MongoDB replica set cluster, backing up to Amazon AWS S3 storage locations.</li>
</ul>
</div>
<div class="admonition summary alert alert-info">
<p class="admonition-title">Summary</p>
<ul>
<li><a href="#before-you-start">Enable backup features</a>.</li>
<li><a href="#add-a-storage-location">Add a storage location</a>.</li>
<li>Satisfy preconditions:<ul>
<li>For <a href="#mysql-backup-preconditions">MySQL</a>:<ul>
<li>Confirm instance service parameters and storage location.</li>
<li>Install required packages.</li>
</ul>
</li>
<li>For <a href="#mongodb-backup-preconditions">MongoDB</a>:<ul>
<li>Install and run <a href="https://www.percona.com/doc/percona-backup-mongodb/installation.html">Percona Backup for MongoDB</a> on every node in the replica set.</li>
</ul>
</li>
</ul>
</li>
<li><a href="#make-a-backup">Make a backup</a>, or,</li>
<li><a href="#make-a-scheduled-backup">Make</a> or <a href="#edit-a-scheduled-backup">edit</a> a scheduled backup, or,</li>
<li><a href="#mongodb-point-in-time-recoverable-backups">Enable MongoDB Point-In-Time-Recoverable Backups</a>, or,</li>
<li><a href="#restore-a-backup">Restore a backup</a>.</li>
<li><a href="#delete-a-backup">Delete a backup</a>.</li>
</ul>
</div>
<h2 id="before-you-start">Before you start<a class="headerlink" href="#before-you-start" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>You have an AWS S3 storage account and location details for it.</p>
</li>
<li>
<p>Backup management has been enabled:</p>
<ol>
<li>
<p>Select <i class="uil uil-cog"></i> <em>Configuration</em> → <i class="uil uil-setting"></i> <em>Settings</em> → <em>Advanced Settings</em>.</p>
</li>
<li>
<p>Activate <em>Backup Management</em>.</p>
</li>
<li>
<p>Click <em>Apply changes</em>.</p>
</li>
</ol>
<div class="admonition note alert alert-primary">
<p>If PMM Server runs as a Docker container, enable backup features at container creation time by adding <code>-e ENABLE_BACKUP_MANAGEMENT=1</code> to your <code>docker run</code> command.</p>
</div>
</li>
</ul>
<h2 id="add-a-storage-location">Add a storage location<a class="headerlink" href="#add-a-storage-location" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Select <i class="uil uil-history"></i> → <em>Backup</em>.</p>
</li>
<li>
<p>Select <em>Storage locations</em>.</p>
<p><div class="lightgallery"><a data-sub-html="" href="../_images/PMM_Backup_Management.jpg"><img alt="" src="../_images/PMM_Backup_Management.jpg" /></a></div></p>
</li>
<li>
<p>Click <em>Add</em>.</p>
</li>
<li>
<p>Fill in the form fields.</p>
<p><div class="lightgallery"><a data-sub-html="" href="../_images/PMM_Backup_Management_Locations_Add_Storage_Location.jpg"><img alt="" src="../_images/PMM_Backup_Management_Locations_Add_Storage_Location.jpg" /></a></div></p>
<ul>
<li><em>Name</em>: A short name for this location.</li>
<li><em>Description</em>: A long description for this location.</li>
<li><em>Type</em>: Choose the type of storage:<ul>
<li><em>S3</em>: Use <a href="https://aws.amazon.com/s3/">Amazon AWS S3</a><ul>
<li><em>Endpoint</em>: The S3 backup location endpoint (URL).</li>
<li><em>Bucket Name</em>: The bucket name.</li>
<li><em>Access Key</em>: The access key string.</li>
<li><em>Secret Key</em>: The secret key string. (Click <i class="uil uil-eye"></i> to reveal and <i class="uil uil-eye-slash"></i> to hide again.)</li>
</ul>
</li>
<li><em>Local Client:</em> (Not currently implemented)</li>
<li><em>Local Server:</em> (Not currently implemented)</li>
</ul>
</li>
</ul>
</li>
<li>
<p>(Optional) Click <em>Test</em> to test the connection.</p>
</li>
<li>
<p>Click <em>Add</em> to add the location.</p>
</li>
</ol>
<h2 id="mysql-backup-preconditions">MySQL backup preconditions<a class="headerlink" href="#mysql-backup-preconditions" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><a href="../setting-up/client/index.html">PMM Client</a> is installed and running on the node.</p>
</li>
<li>
<p>There is only one MySQL instance running on the node.</p>
</li>
<li>
<p>MySQL is running:</p>
<ul>
<li>
<p>as a service via <code>systemd</code>;</p>
</li>
<li>
<p>with the name <code>mysql</code> (to confirm, use <code>systemctl status mysql</code>);</p>
</li>
<li>
<p>from a <code>mysql</code> system user account.</p>
</li>
</ul>
</li>
<li>
<p>There is a <code>mysql</code> system group.</p>
</li>
<li>
<p>MySQL is using the <code>/var/lib/mysql</code> directory for database storage.</p>
</li>
<li>
<p><code>pmm-agent</code> has read/write permissions to the <code>/var/lib/mysql</code> directory.</p>
</li>
<li>
<p>The latest versions of the following packages are installed. They should be included in the <code>$PATH</code> environment variable:</p>
<ul>
<li>
<p><a href="https://www.percona.com/software/mysql-database/percona-xtrabackup"><code>xtrabackup</code></a>, which includes:</p>
<ul>
<li>
<p><a href="https://www.percona.com/doc/percona-xtrabackup/2.3/xbcloud/xbcloud.html"><code>xbcloud</code></a>;</p>
</li>
<li>
<p><a href="https://www.percona.com/doc/percona-xtrabackup/2.3/xbstream/xbstream.html"><code>xbstream</code></a>;</p>
</li>
</ul>
</li>
<li>
<p><a href="https://www.percona.com/doc/percona-xtrabackup/LATEST/backup_scenarios/compressed_backup.html"><code>qpress</code></a>.</p>
</li>
</ul>
<div class="admonition caution alert alert-warning">
<p class="admonition-title">Important</p>
<p>The versions of each must be compatible with the installed version of MySQL.</p>
</div>
</li>
</ul>
<h2 id="mongodb-backup-preconditions">MongoDB backup preconditions<a class="headerlink" href="#mongodb-backup-preconditions" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><a href="https://www.percona.com/doc/percona-backup-mongodb/installation.html">Percona Backup for MongoDB</a> is installed and <code>pbm-agent</code> is running on all MongoDB nodes in the replica set.</p>
</li>
<li>
<p>MongoDB is a member of a replica set.</p>
</li>
</ul>
<h2 id="make-a-backup">Make a backup<a class="headerlink" href="#make-a-backup" title="Permanent link">&para;</a></h2>
<p>Make a single on-demand backup.</p>
<ol>
<li>
<p><a href="#add-a-storage-location">Add a storage location</a>.</p>
</li>
<li>
<p>Select <i class="uil uil-history"></i> → <em>Backup</em>.</p>
</li>
<li>
<p>Select <em>Backup Inventory</em>.</p>
</li>
<li>
<p>Click <i class="uil uil-plus-square"></i> <em>Add</em>.</p>
</li>
<li>
<p>In the <em>Backup on demand</em> dialog, enter values for:</p>
<ul>
<li><em>Service name</em>: Choose from the menu the service to back up.</li>
<li><em>Vendor</em>: A value is automatically selected based on the service type.</li>
<li><em>Backup name</em>: Enter a unique name for this backup.</li>
<li><em>Description</em>: (Optional) Enter a long description for this backup.</li>
<li><em>Location</em>: Choose from the menu the storage location.</li>
</ul>
</li>
<li>
<p>Click <em>Backup</em>.</p>
</li>
<li>
<p>In the <em>Backup Inventory</em> pane, watch the <em>Status</em> column. An animated ellipsis indicator <svg width="16" height="16" viewBox="0 0 20 15" xmlns="http://www.w3.org/2000/svg"><g><path stroke="null" d="m5.61584,12.03388c0,1.50105 -1.21673,2.71779 -2.71779,2.71779s-2.71779,-1.21673 -2.71779,-2.71779s1.21673,-2.71779 2.71779,-2.71779s2.71779,1.21673 2.71779,2.71779zm0,0" fill="black" id="ellipsis-one" class="ellipsis" /><path stroke="null" d="m12.70445,11.97617c0,1.50105 -1.21674,2.71779 -2.71779,2.71779s-2.71779,-1.21674 -2.71779,-2.71779s1.21673,-2.71779 2.71779,-2.71779s2.71779,1.21673 2.71779,2.71779zm0,0" fill="black" id="ellipsis-two" class="ellipsis" /><path stroke="null" d="m19.79306,12.02001c0,1.50105 -1.21674,2.71779 -2.71779,2.71779s-2.71779,-1.21674 -2.71779,-2.71779s1.21673,-2.71779 2.71779,-2.71779s2.71779,1.21673 2.71779,2.71779zm0,0" fill="black" id="ellipsis-three" class="ellipsis" /></g></svg> shows activity in progress.</p>
</li>
</ol>
<h2 id="make-a-scheduled-backup">Make a scheduled backup<a class="headerlink" href="#make-a-scheduled-backup" title="Permanent link">&para;</a></h2>
<p>Make regular scheduled backups.</p>
<ol>
<li>
<p><a href="#add-a-storage-location">Add a storage location</a>.</p>
</li>
<li>
<p>Select <i class="uil uil-history"></i> → <em>Backup</em>.</p>
</li>
<li>
<p>Select <em>Scheduled Backups</em>.</p>
</li>
<li>
<p>Click <i class="uil uil-plus-square"></i> <em>Add</em>.</p>
</li>
<li>
<p>In the <em>Schedule backup</em> dialog, enter values for:</p>
<ul>
<li><em>Service name</em>: Choose from the menu the service to back up.</li>
<li><em>Backup name</em> : Enter a unique name for this scheduled backup.</li>
<li><em>Vendor</em>: A value is automatically selected based on the service type.</li>
<li><em>Location</em>: Choose from the menu the storage location.</li>
<li><em>Data model</em>: Select one of the options:<ul>
<li><em>Physical</em>: Backup the physical data model.</li>
<li><em>Logical</em>: (Not currently implemented)</li>
</ul>
</li>
<li><em>Description</em>: (Optional) Enter a long description for this scheduled backup.</li>
<li>
<p><em>Schedule</em>: The schedule for the backup.</p>
<ul>
<li><em>Every</em>: The backup interval. Choose from the menu one of:<ul>
<li><em>Year</em></li>
<li><em>Month</em></li>
<li><em>Week</em></li>
<li><em>Day</em></li>
<li><em>Hour</em></li>
<li><em>Minute</em></li>
</ul>
</li>
<li>
<p>Depending on the interval chosen, the remaining options will be active or inactive.</p>
<ul>
<li><em>Month</em>: Select one or more months.</li>
<li><em>Day</em>: Select one or more day numbers.</li>
<li><em>Weekday</em>: Select one or more week day names.</li>
<li><em>Start time, h/m</em>: The hour and minute for the backup.<ul>
<li>In the first field, select one or more hours (<em>00</em> to <em>23</em>, <em>00</em> is midnight).</li>
<li>In the second field, select one or more minutes (<em>00</em> to <em>59</em>).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>Retention</em>: How many backups to keep. For unlimited, use <code>0</code> (zero).</p>
</li>
<li><em>Retry mode</em>: In case of error, either let PMM retry the backup again (&ldquo;Auto&rdquo;) or do it again yourself (&ldquo;Manual&rdquo;).</li>
<li><em>Retry times and interval</em>: If &ldquo;Auto&rdquo; retry mode is selected, the maximum number of retries - up to 10 - and the interval between them - up to 8 hours - can be set here.</li>
<li><em>Enable</em>: Deselect to define the scheduled backup without enabling it.</li>
</ul>
<p><div class="lightgallery"><a data-sub-html="" href="../_images/PMM_Backup_Management_Schedule.png"><img alt="" src="../_images/PMM_Backup_Management_Schedule.png" /></a></div></p>
<div class="admonition note">
<p>For this release (2.25.0), times are UTC.</p>
</div>
</li>
</ul>
</li>
<li>
<p>Click <em>Schedule</em>.</p>
</li>
<li>
<p>A new entry will appear in the list.</p>
</li>
</ol>
<h2 id="edit-a-scheduled-backup">Edit a scheduled backup<a class="headerlink" href="#edit-a-scheduled-backup" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Select <i class="uil uil-history"></i> → <em>Backup</em>.</p>
</li>
<li>
<p>Select <em>Scheduled Backups</em>.</p>
</li>
<li>
<p>In the <em>Actions</em> column:</p>
<ul>
<li>Click the switch <i class="uil uil-toggle-on"></i> to enable or disable the backup.</li>
<li>Click <i class="uil uil-pen"></i> to edit the backup schedule.</li>
<li>Click <i class="uil uil-times"></i> to delete the backup schedule.</li>
<li>
<p>Click <i class="uil uil-copy"></i> to create a (by default, disabled) copy of the backup schedule.</p>
<p><div class="lightgallery"><a data-sub-html="" href="../_images/PMM_Backup_Management_Scheduled_Backups_Copy.png"><img alt="" src="../_images/PMM_Backup_Management_Scheduled_Backups_Copy.png" /></a></div></p>
</li>
</ul>
</li>
</ol>
<h2 id="mongodb-point-in-time-recoverable-backups">MongoDB Point-In-Time-Recoverable Backups<a class="headerlink" href="#mongodb-point-in-time-recoverable-backups" title="Permanent link">&para;</a></h2>
<div class="admonition caution alert alert-warning">
<p class="admonition-title">Caution</p>
<ul>
<li>MongoDB Point-In-Time-Recoverable Backups is part of Backup Management which is a <a href="../details/glossary.html#technical-preview">technical preview</a> feature.</li>
</ul>
</div>
<h3 id="what-is-it">What is it?<a class="headerlink" href="#what-is-it" title="Permanent link">&para;</a></h3>
<p>Better described by our team mates that develop Percona Backup for MongoDB:</p>
<div class="admonition note alert alert-primary">
<p>Point-in-Time Recovery is restoring a database up to a specific moment. Point-in-Time Recovery includes restoring the data from a backup snapshot and replaying all events that occurred to this data up to a specified moment from <a href="https://www.percona.com/doc/percona-backup-mongodb/glossary.html#term-oplog-slice">oplog slices</a>. Point-in-Time Recovery helps you prevent data loss during a disaster such as crashed database, accidental data deletion or drop of tables, unwanted update of multiple fields instead of a single one.</p>
</div>
<p>Point-In-Time-Recovery (PITR) Backups for MongoDB is new functionality available with PMM 2.23.0 as part of the larger Backup Management feature. This implementation in PMM uses Percona Backup for MongoDB <code>pbm &gt;= 1.6.0</code> behind the scenes.</p>
<div class="admonition caution alert alert-warning">
<ul>
<li>Percona Backup for MongoDB is a distributed, low-impact solution for achieving consistent backups of MongoDB sharded clusters and replica sets. Percona Backup for MongoDB supports <a href="https://www.percona.com/software/mongo-database/percona-server-for-mongodb">Percona Server for MongoDB</a> and MongoDB Community v3.6 or higher with <a href="https://docs.mongodb.com/manual/replication/">MongoDB Replication</a> enabled. Learn more about <a href="https://www.percona.com/doc/percona-backup-mongodb/installation.html">Percona Backup for MongoDB</a>.</li>
</ul>
</div>
<h3 id="how-does-it-work">How does it work?<a class="headerlink" href="#how-does-it-work" title="Permanent link">&para;</a></h3>
<h4 id="enabling-pitr">Enabling PITR<a class="headerlink" href="#enabling-pitr" title="Permanent link">&para;</a></h4>
<p>The very first thing you want to do is to enable PITR. Here’s how:</p>
<ol>
<li>Go to <em>Backup Management</em>.</li>
<li>Select <em>Scheduled Backups</em>.</li>
<li>Click on <em>Add</em> to create a new scheduled backup.</li>
<li>
<p>Click on the PITR button to enable Point-In-Time-Recovery.</p>
<p><div class="lightgallery"><a data-sub-html="" href="../_images/PMM_Backup_Management-MongoDB-PITR-Enable.jpg"><img alt="" src="../_images/PMM_Backup_Management-MongoDB-PITR-Enable.jpg" /></a></div></p>
</li>
</ol>
<p>Once you’ve enabled PITR, head to the list of Scheduled Backups to confirm PITR is enabled.</p>
<p><div class="lightgallery"><a data-sub-html="" href="../_images/PMM_Backup_Management-MongoDB-PITR-Enable-Check.jpg"><img alt="" src="../_images/PMM_Backup_Management-MongoDB-PITR-Enable-Check.jpg" /></a></div></p>
<p>To disable PITR use the corresponding switch available on the list.</p>
<h4 id="pitr-artifacts">PITR Artifacts<a class="headerlink" href="#pitr-artifacts" title="Permanent link">&para;</a></h4>
<p>The PITR artifacts will be available once your PITR job has run for the first time. Go to Backup Inventory to see the corresponding PITR artifact.</p>
<p><div class="lightgallery"><a data-sub-html="" href="../_images/PMM_Backup_Management-MongoDB-PITR-Inventory.jpg"><img alt="" src="../_images/PMM_Backup_Management-MongoDB-PITR-Inventory.jpg" /></a></div></p>
<h4 id="pitr-and-other-scheduled-backups">PITR and Other Scheduled Backups<a class="headerlink" href="#pitr-and-other-scheduled-backups" title="Permanent link">&para;</a></h4>
<p>It is important to notice that enabling PITR requires any other scheduled backup jobs to be disabled. If you try to enable PITR while other scheduled backup jobs are active, you will be shown an error message as seen in the image below.</p>
<p><div class="lightgallery"><a data-sub-html="" href="../_images/PMM_Backup_Management-MongoDB-PITR-Enable-Error.jpg"><img alt="" src="../_images/PMM_Backup_Management-MongoDB-PITR-Enable-Error.jpg" /></a></div></p>
<p>Go ahead to manually disable the existing scheduled jobs, then you’ll be able to enable PITR.</p>
<p>The above constraint applies at the service level. That said, you can still have PITR enabled for one service while having regular scheduled backup jobs for other services.</p>
<h2 id="restore-a-backup">Restore a backup<a class="headerlink" href="#restore-a-backup" title="Permanent link">&para;</a></h2>
<div class="admonition note alert alert-primary">
<p>For now, you can only restore a backup to the same service it was created from, or to a compatible one.</p>
</div>
<ol>
<li>
<p>Select <i class="uil uil-history"></i> → <em>Backup</em> → <em>Backup Inventory</em>.</p>
</li>
<li>
<p>Find the row with the backup you want to restore.</p>
</li>
<li>
<p>In the <em>Actions</em> column for that row, click <em>Restore from backup</em>.</p>
</li>
<li>
<p>In the <em>Restore from backup</em> dialog:</p>
<ul>
<li>
<p>Select <em>Same service</em> to restore to a service with identical properties.</p>
<ul>
<li>Select the service in the <em>Service name</em> menu.</li>
</ul>
</li>
<li>
<p>Select <em>Compatible services</em> to restore to a compatible service.</p>
<ul>
<li>Select the compatible service in the <em>Service name</em> menu.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Check the values and click <em>Restore</em>.</p>
</li>
<li>
<p>Navigate to the <em>Restore History</em> tab to check the status of the restored backup.</p>
</li>
</ol>
<h2 id="delete-a-backup">Delete a backup<a class="headerlink" href="#delete-a-backup" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Select <i class="uil uil-history"></i> → <em>Backup</em> → <em>Backup Inventory</em>.</p>
</li>
<li>
<p>Find the row with the backup you want to delete.</p>
</li>
<li>
<p>In the <em>Actions</em> column for that row, click <em>Delete backup</em>.</p>
</li>
<li>
<p>(Optional) Check <em>Delete from storage</em> to also delete the actual backup content besides just the backup register.</p>
</li>
<li>
<p>Click <em>Delete</em> to proceed.</p>
</li>
</ol>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2021-10-21
    
  </small>
</div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="alerting.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Integrated Alerting" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Integrated Alerting
            </div>
          </div>
        </a>
      
      
        
        <a href="query-analytics.html" class="md-footer__link md-footer__link--next" aria-label="Next: Query Analytics" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Query Analytics
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Percona LLC, &#169; 2021
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.0bbba5b5.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.e1a181d9.min.js"></script>
      
        <script src="../js/version-select.js"></script>
      
        <script src="../js/toctree.js"></script>
      
        <script src="../js/lightgallery.min.js"></script>
      
    
  </body>
</html>